(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),l=a.n(s),o=a(9),c=a(11),i=a(13),u=a(12),m=a(32),h=(a(77),a(78),a(36)),d=a(34),g=a(42),p=a.n(g),E=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){var a=e.username,n=e.password;return t.service.post("/signup",{username:a,password:n})},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n})},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=p.a.create({baseURL:"".concat("https://revitalize.herokuapp.com/")||!1,withCredentials:!0})},v=a(10),f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logout=function(){n.props.setTheUser(!1),n.authService.logout()},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(h.a.Brand,{as:"div"},r.a.createElement(v.b,{to:"/"},"Coasters React!")),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,null,r.a.createElement(d.a.Link,{as:"div"},r.a.createElement(v.b,{to:"/"},"Inicio")),r.a.createElement(d.a.Link,{as:"div"},r.a.createElement(v.b,{to:"/coasters"},"Monta\xf1as rusas")),this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Link,{as:"div"},r.a.createElement(v.b,{to:"/profile"},"Mi perfil")),r.a.createElement(d.a.Link,{as:"div",onClick:this.logout},"Cerrar sesi\xf3n")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Link,{as:"div"},r.a.createElement(v.b,{to:"/login"},"Iniciar sesi\xf3n")),r.a.createElement(d.a.Link,{as:"div"},r.a.createElement(v.b,{to:"/signup"},"Registro")))),r.a.createElement(h.a.Text,{className:"ml-auto"}," Hola, ",this.props.loggedInUser?this.props.loggedInUser.username:"invitad@")))}}]),a}(n.Component),b=a(23),C=function e(){var t=this;Object(o.a)(this,e),this.getProjects=function(){return t.service.get("/getAllProjects")},this.getProject=function(e){return t.service.get("/getOneProject/".concat(e))},this.createProject=function(e){return t.service.post("/postProject",e)},this.service=p.a.create({baseURL:"".concat("https://revitalize.herokuapp.com/","/projects"),withCredentials:!0})},I=(a(102),a(20)),j=a(40),O=function(e){return r.a.createElement(I.a,{lg:3,md:6},r.a.createElement(j.a,{as:"article"},r.a.createElement(j.a.Img,{variant:"top",src:e.imageUrl}),r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,e.title),r.a.createElement(v.b,{to:"/coasters/".concat(e._id),className:"btn btn-dark btn-block btn-sm"},"Ver detalles"))))},U=a(29),S=a(22),k=a(6),y=a(25),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(U.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.coasterService.saveCoaster(n.state).then((function(){return n.props.finishCoasterPost()})).catch((function(e){return console.log(e)}))},n.state={title:"",description:"",length:0,inversions:0,imageUrl:""},n.coasterService=new C,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,null,r.a.createElement("h1",null,"Nueva monta\xf1a rusa"),r.a.createElement("hr",null),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Group,{controlId:"title"},r.a.createElement(k.a.Label,null,"Nombre"),r.a.createElement(k.a.Control,{name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"desc"},r.a.createElement(k.a.Label,null,"Descripcion"),r.a.createElement(k.a.Control,{name:"description",type:"text",value:this.state.description,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"inv"},r.a.createElement(k.a.Label,null,"Inversiones"),r.a.createElement(k.a.Control,{name:"inversions",type:"text",value:this.state.inversions,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"len"},r.a.createElement(k.a.Label,null,"Longitud"),r.a.createElement(k.a.Control,{name:"length",type:"text",value:this.state.length,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"img"},r.a.createElement(k.a.Label,null,"Imagen (URL)"),r.a.createElement(k.a.Control,{name:"imageUrl",type:"text",value:this.state.imageUrl,onChange:this.handleInputChange})),r.a.createElement(y.a,{variant:"dark",onClick:function(){return e.props.closeModal()},style:{marginRight:"10px"}},"Cerrar"),r.a.createElement(y.a,{variant:"dark",type:"submit"},"Crear monta\xf1a rusa")))}}]),a}(n.Component),L=a(30),M=a(52),x=a(58),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleModal=function(t){return e.setState({modalShow:t})},e.handletoast=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(b.a)({},e.state.toast);n.show=t,n.text=a,e.setState({toast:n})},e.getAllCoasters=function(){e.coasterService.getCoasters().then((function(t){return e.setState({coasters:t.data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.getAllCoasters()},e.finishCoasterPost=function(){e.getAllCoasters(),e.handleModal(!1),e.handletoast(!0,"Registro creado en BBDD")},e.state={modalShow:!1,toast:{show:!1,text:""},coasters:[]},e.coasterService=new C,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{as:"section"},r.a.createElement("h1",null,"Listado de monta\xf1as rusas"),this.props.loggedInUser&&r.a.createElement(y.a,{onClick:function(){return e.handleModal(!0)},variant:"dark",style:{marginBottom:"20px"}},"Crear nueva monta\xf1a rusa"),r.a.createElement(L.a,{className:"coasters-list"},this.state.coasters.map((function(e){return r.a.createElement(O,Object.assign({key:e._id},e))}))),r.a.createElement(x.a,{show:this.state.modalShow,onHide:function(){return e.handleModal(!1)}},r.a.createElement(x.a.Body,null,r.a.createElement(w,{finishCoasterPost:this.finishCoasterPost,closeModal:function(){return e.handleModal(!1)}}))),r.a.createElement(M.a,{onClose:function(){return e.handletoast(!1)},show:this.state.toast.show,delay:3e3,autohide:!0},r.a.createElement(M.a.Header,null,r.a.createElement("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),r.a.createElement("strong",{className:"mr-auto"},"Mensaje")),r.a.createElement(M.a.Body,null,this.state.toast.text)))}}]),a}(n.Component),N=(a(103),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getCoasterInfo()},n.state={},n.coasterService=new C,n}return Object(c.a)(a,[{key:"getCoasterInfo",value:function(){var e=this,t=this.props.match.params.coasterId;this.coasterService.getCoaster(t).then((function(t){return e.setState(t.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(S.a,{as:"section",className:"coaster-details"},r.a.createElement("h1",null,this.state.title),r.a.createElement("hr",null),r.a.createElement(L.a,null,r.a.createElement(I.a,{md:{span:4,offset:1}},r.a.createElement("h4",null,"Info"),r.a.createElement("p",null,this.state.description),r.a.createElement("h4",null,"Detalles t\xe9cnicos"),r.a.createElement("ul",null,r.a.createElement("li",null,"Longitud: ",this.state.length),r.a.createElement("li",null,"Inversiones: ",this.state.inversions))),r.a.createElement(I.a,{md:6},r.a.createElement("img",{src:this.state.imageUrl,alt:this.state.title}))),r.a.createElement(v.b,{to:"/coasters",className:"btn btn-dark"},"Volver"))}}]),a}(n.Component)),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(b.a)({},n.state.loginInfo),a=e.target,r=a.name,s=a.value;t=Object(b.a)(Object(b.a)({},t),{},Object(U.a)({},r,s)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(L.a,null,r.a.createElement(I.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Registro de usuario"),r.a.createElement("hr",null),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Group,{controlId:"name"},r.a.createElement(k.a.Label,null,"Usuario"),r.a.createElement(k.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"pwd"},r.a.createElement(k.a.Label,null,"Contrase\xf1a"),r.a.createElement(k.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(y.a,{variant:"dark",type:"submit"},"Registrarme")),r.a.createElement("p",null,r.a.createElement("small",null,"\xbfYa tienes cuenta? ",r.a.createElement(v.b,{to:"/login"},"Inicia sesi\xf3n"))))))}}]),a}(n.Component),R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(b.a)({},n.state.loginInfo),a=e.target,r=a.name,s=a.value;t=Object(b.a)(Object(b.a)({},t),{},Object(U.a)({},r,s)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(L.a,null,r.a.createElement(I.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Inicio de sesi\xf3n"),r.a.createElement("hr",null),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Group,{controlId:"name"},r.a.createElement(k.a.Label,null,"Usuario"),r.a.createElement(k.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(k.a.Group,{controlId:"pwd"},r.a.createElement(k.a.Label,null,"Contrase\xf1a"),r.a.createElement(k.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(y.a,{variant:"dark",type:"submit"},"Iniciar sesi\xf3n")),r.a.createElement("p",null,r.a.createElement("small",null,"\xbfNo tienes cuenta? ",r.a.createElement(v.b,{to:"/signup"},"Reg\xedstrate"))))))}}]),a}(n.Component),B=function(e){return r.a.createElement("h1",null,"\xa1Bienvend@, ",e.loggedInUser.username,"!")},D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new E,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement("main",null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/coasters",exact:!0,render:function(){return r.a.createElement(T,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(m.b,{path:"/coasters/:coasterId",render:function(e){return r.a.createElement(N,e)}}),r.a.createElement(m.b,{path:"/signup",render:function(t){return r.a.createElement(P,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/login",render:function(t){return r.a.createElement(R,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(B,{loggedInUser:e.state.loggedInUser}):r.a.createElement(m.a,{to:"/"})}}))))}}]),a}(n.Component);l.a.render(r.a.createElement(v.a,null,r.a.createElement(D,null)),document.getElementById("root"))},72:function(e,t,a){e.exports=a(104)},78:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.559608d4.chunk.js.map