(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),s=a.n(l),o=a(10),c=a(11),i=a(13),u=a(12),m=a(33),h=(a(77),a(78),a(36)),p=a(28),d=a(42),g=a.n(d),E=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){var a=e.username,n=e.password;return t.service.post("/signup",{username:a,password:n})},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n})},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=g.a.create({baseURL:"".concat("https://revitalize.herokuapp.com","/api"),withCredentials:!0})},f=a(9),v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logout=function(){n.props.setTheUser(!1),n.authService.logout()},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{expand:"md"},r.a.createElement(h.a.Brand,{as:"div"},r.a.createElement(f.b,{to:"/"},"Revitalize the planet!")),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,null,r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/projects"},"Discover projects")),r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/ranking"},"Ranking")),this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/profile"},"My profile")),r.a.createElement(p.a.Link,{as:"div",onClick:this.logout},"Close session")):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/login"},"Login")),r.a.createElement(p.a.Link,{as:"div"},r.a.createElement(f.b,{to:"/signup"},"Sign up")))),r.a.createElement(h.a.Text,{className:"ml-auto"}," Hello, ",this.props.loggedInUser?this.props.loggedInUser.username:"invitad@")))}}]),a}(n.Component),b=a(24),j=function e(){var t=this;Object(o.a)(this,e),this.getAllProjects=function(){return t.service.get("/getAllProjects")},this.getProject=function(e){return t.service.get("/getOneProject/".concat(e))},this.createProject=function(e){return t.service.post("/postProject",e)},this.service=g.a.create({baseURL:"".concat("https://revitalize.herokuapp.com","/api"),withCredentials:!0})},I=(a(102),a(21)),O=a(40),C=function(e){return r.a.createElement(I.a,{lg:3,md:6},r.a.createElement(O.a,{as:"article"},r.a.createElement(O.a.Img,{variant:"top",src:e.photos[0]}),r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Title,null,e.description),r.a.createElement("small",null,"#",e.projectType),r.a.createElement(f.b,{to:"/projects/".concat(e._id),className:"btn btn-dark btn-block btn-sm"},"see more details"))))},S=a(30),y=a(23),w=a(6),k=a(17),U=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.projectService.createProject(n.state).then((function(){return n.props.finishProjectPost()})).catch((function(e){return console.log(e)}))},n.state={description:"",goal:0},n.projectService=new j,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(y.a,null,r.a.createElement("h1",null,"Create new project"),r.a.createElement("hr",null),r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"desc"},r.a.createElement(w.a.Label,null,"Description"),r.a.createElement(w.a.Control,{name:"description",type:"text",value:this.state.description,onChange:this.handleInputChange})),r.a.createElement(w.a.Group,{controlId:"inv"},r.a.createElement(w.a.Label,null,"Goal"),r.a.createElement(w.a.Control,{name:"inversions",type:"text",value:this.state.inversions,onChange:this.handleInputChange})),r.a.createElement(k.a,{variant:"dark",onClick:function(){return e.props.closeModal()},style:{marginRight:"10px"}},"Close"),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Create")))}}]),a}(n.Component),P=a(31),L=a(52),M=a(58),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleModal=function(t){return e.setState({modalShow:t})},e.handletoast=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(b.a)({},e.state.toast);n.show=t,n.text=a,e.setState({toast:n})},e.getAllProjects=function(){e.projectService.getAllProjects().then((function(t){return e.setState({projects:t.data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.getAllProjects()},e.finishProjectPost=function(){e.getAllProjects(),e.handleModal(!1),e.handletoast(!0,"Saved in the Data Base")},e.state={modalShow:!1,toast:{show:!1,text:""},projects:[]},e.projectService=new j,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{as:"section"},r.a.createElement("h1",null,"Projects List"),this.props.loggedInUser&&r.a.createElement(k.a,{onClick:function(){return e.handleModal(!0)},variant:"dark",style:{marginBottom:"20px"}},"Create new project"),this.state.projects?r.a.createElement(P.a,{className:"projects-list"},this.state.projects.map((function(e){return r.a.createElement(C,Object.assign({key:e._id},e))}))):r.a.createElement("h1",null,"Loading..."),r.a.createElement(M.a,{show:this.state.modalShow,onHide:function(){return e.handleModal(!1)}},r.a.createElement(M.a.Body,null,r.a.createElement(U,{finishProjectPost:this.finishProjectPost,closeModal:function(){return e.handleModal(!1)}}))),r.a.createElement(L.a,{onClose:function(){return e.handletoast(!1)},show:this.state.toast.show,delay:3e3,autohide:!0},r.a.createElement(L.a.Header,null,r.a.createElement("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),r.a.createElement("strong",{className:"mr-auto"},"Message")),r.a.createElement(L.a.Body,null,this.state.toast.text))))}}]),a}(n.Component),x=(a(103),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getProjectInfo()},n.state={project:null,modalShow:!1},n.projectService=new j,n}return Object(c.a)(a,[{key:"getProjectInfo",value:function(){var e=this,t=this.props.match.params.projectId;this.projectService.getProject(t).then((function(t){return e.setState({project:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.project?r.a.createElement(y.a,{as:"section",className:"project-details"},r.a.createElement(P.a,null,r.a.createElement(I.a,{md:{span:4,offset:1}},r.a.createElement(I.a,{md:6},r.a.createElement("img",{src:this.state.project.photos,alt:"Project photos"})),r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Description: ",this.state.project.description)," ",r.a.createElement("br",null)," ",r.a.createElement("hr",null),r.a.createElement("li",null,"Goal: ",this.state.project.currentAmount,"\u20ac / ",this.state.project.goal,"\u20ac - ",r.a.createElement(k.a,null,r.a.createElement("small",null,"Contribute"))),r.a.createElement("li",null,"Cleaners: ",this.state.project.helpers.length," / ",this.state.project.helpersNeeded," - ",r.a.createElement(k.a,null,r.a.createElement("small",null,"Help")))))),r.a.createElement(f.b,{to:"/projects",className:"back"},"Back")):r.a.createElement("h1",null,"Loading..."))}}]),a}(n.Component)),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(b.a)({},n.state.loginInfo),a=e.target,r=a.name,l=a.value;t=Object(b.a)(Object(b.a)({},t),{},Object(S.a)({},r,l)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(P.a,null,r.a.createElement(I.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Sign up"),r.a.createElement("hr",null),r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"name"},r.a.createElement(w.a.Label,null,"Username"),r.a.createElement(w.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(w.a.Group,{controlId:"pwd"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Sign up")),r.a.createElement("p",null,r.a.createElement("small",null,"Do you have already an account? ",r.a.createElement(f.b,{to:"/login"},"Login"))))))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(b.a)({},n.state.loginInfo),a=e.target,r=a.name,l=a.value;t=Object(b.a)(Object(b.a)({},t),{},Object(S.a)({},r,l)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){console.log("response: ",e),n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(P.a,null,r.a.createElement(I.a,{md:{span:4,offset:4}},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"name"},r.a.createElement(w.a.Label,null,"Username"),r.a.createElement(w.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(w.a.Group,{controlId:"pwd"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(k.a,{variant:"dark",type:"submit"},"Log in")),r.a.createElement("p",null,r.a.createElement("small",null,"Don\xb4t you have an account yet? ",r.a.createElement(f.b,{to:"/signup"},"Sign Up"))))))}}]),a}(n.Component),A=function(e){return r.a.createElement("h1",null,"\xa1Ouu yeah, ",e.loggedInUser.username,", you came back!")},B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new E,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement("main",null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/projects",exact:!0,render:function(){return r.a.createElement(T,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(m.b,{path:"/projects/:projectId",render:function(t){return r.a.createElement(x,Object.assign({},t,{user:e.state.loggedInUser}))}}),r.a.createElement(m.b,{path:"/signup",render:function(t){return r.a.createElement(D,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/login",render:function(t){return r.a.createElement(N,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(A,{loggedInUser:e.state.loggedInUser}):r.a.createElement(m.a,{to:"/"})}}))))}}]),a}(n.Component);s.a.render(r.a.createElement(f.a,null,r.a.createElement(B,null)),document.getElementById("root"))},72:function(e,t,a){e.exports=a(104)},78:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.8341d560.chunk.js.map